% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/datatables-write-template-rmd-functions.R
\name{datatable_create_template_rmd}
\alias{datatable_create_template_rmd}
\title{Create a New DataTable from a Template in an Rmd File}
\usage{
datatable_create_template_rmd(
  rmd_path,
  rmd_line,
  datatable_name,
  template_datatable_name,
  IDs = NULL,
  all_ids = FALSE,
  dt_length = 100
)
}
\arguments{
\item{rmd_path}{Character. Path to the Rmd file containing the DataTable template.}

\item{rmd_line}{Integer. Line number within the Rmd file that falls inside the template DataTable delimiters.}

\item{datatable_name}{Character. Name of an existing DataTable to source sample IDs from; if \code{NULL}, the \code{IDs} vector is used.}

\item{template_datatable_name}{Character. Name to assign to the newly created DataTable.}

\item{IDs}{Character vector. Sample IDs to use if \code{datatable_name} is \code{NULL}.}

\item{all_ids}{Logical. If \code{TRUE}, includes all sample IDs from the source DataTable, ignoring those marked as DISPOSED EXPORTED or RESAMPLED. Defaults to \code{FALSE}.}

\item{dt_length}{Integer. Maximum length (in characters) allowed for the generated DataTable. Defaults to 100.}
}
\value{
Invisibly returns the modified Rmd file contents after inserting the new DataTable.
}
\description{
This function streamlines the creation of derivative DataTables for logging further
processing and data collection. It reads an Rmd file, locates a specially formatted
template DataTable, marked with the header \code{TEMPLATE  :  CREATE}, and generates a new,
concrete DataTable by replacing placeholder tokens \verb{<<IDS>>} with actual sample IDs.
}
\details{
The process works as follows:
\enumerate{
\item The Rmd file is validated and read from the provided \code{rmd_path}.
\item The function identifies the template DataTable using the \code{rmd_line}
parameter, which must fall within the template’s delimiter block.
\item It extracts the template’s data structure, including the default data
columns and values, as well as the \verb{<<IDS>>} placeholder in the ID
column.
\item Sample IDs are sourced from an existing DataTable
(if \code{datatable_name} is provided) or directly from the supplied
\code{IDs} vector. In the case of an existing DataTable, only those
IDs not marked as DISPOSED EXPORTED or RESAMPLED are selected by
default, unless \code{all_ids} is set to \code{TRUE}.
\item A new DataTable is created using these sample IDs, replicating the
default values defined in the template. Suffixes or prefixes defined
in the template are applied accordingly.
\item Finally, the generated DataTable is inserted back into the Rmd file,
replacing the original template.
}

This approach is especially useful when working with a large number of samples,
as it allows rapid derivation of new DataTables with consistent default
settings and customized sample identifiers, thereby simplifying subsequent
data processing and record keeping.

The template DataTable must be formatted with a header starting with
\code{TEMPLATE  :  CREATE} (optionally followed by a default table name),
and it should include the \code{<<IDS>>} placeholder in the ID column. This
placeholder is replaced by actual sample IDs derived from an existing DataTable
or provided via \code{IDs}. The function maintains the default data values
from the template, ensuring that any custom values remain unchanged unless
the template is modified.
}
