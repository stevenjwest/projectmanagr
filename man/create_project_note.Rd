% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/create-functions.R
\name{create_project_note}
\alias{create_project_note}
\title{Create a New Project Note within a Project Document}
\usage{
create_project_note(
  projectNoteName,
  projectNotePath,
  selection,
  authorValue = get_username(),
  projectNoteTitle = "",
  projNoteTemplate = "Project-Note-Template.Rmd",
  projNoteLinkTemplate = "Project-Note-Link-Template.Rmd",
  projNoteLinkSummaryTemplate = "Project-Note-Link-Summary-Template.Rmd",
  todoTemplate = "Todo-Template.Rmd",
  projNoteSummaryTemplate = "Project-Note-Summary-Template.Rmd"
)
}
\arguments{
\item{projectNoteName}{Character. The name of the new project note. Must not
contain spaces.}

\item{projectNotePath}{Character. The file path where the project note will
be created.}

\item{selection}{List. Contains metadata about the selected project document.
Must include:
\itemize{
\item \code{selection$rmdType}: Must be \code{"DOC"} to indicate a valid project doc.
\item \code{selection$filePath}: The file path of the project document.
\item \code{selection$goal}: The goal under which the note is being created.
\item \code{selection$deliverable}: The deliverable related to the note.
\item \code{selection$task}: The specific task that the note is linked to.
\item \code{selection$taskLine}: The line number in the project document where
the task is defined.
}}

\item{authorValue}{Character. The author of the project note. Defaults to the
system username.}

\item{projectNoteTitle}{Character. The title of the project note. If empty,
it will be derived from \code{projectNoteName}.}

\item{projNoteTemplate}{Character. The filename of the project note template.
Default is \code{"Project-Note-Template.Rmd"}.}

\item{projNoteLinkTemplate}{Character. The filename of the project note link
template. Default is \code{"Project-Note-Link-Template.Rmd"}.}

\item{projNoteLinkSummaryTemplate}{Character. The filename of the project note
link summary template. Default is \code{"Project-Note-Link-Summary-Template.Rmd"}.}

\item{todoTemplate}{Character. The filename of the project note's To-Do
template. Default is \code{"Todo-Template.Rmd"}.}

\item{projNoteSummaryTemplate}{Character. The filename of the project note
summary template. Default is \code{"Project-Note-Summary-Template.Rmd"}.}
}
\value{
None. The function creates files and modifies the project document.
}
\description{
Generates a new project note within an existing project document, creating
the necessary directory structure, R Markdown files, and linking it to the
corresponding goal, deliverable, or task in the project document.
}
\details{
This function performs the following steps:
\enumerate{
\item Ensures \code{projectNoteName} does not contain spaces.
\item Validates that \code{selection$rmdType} is \code{"DOC"}, ensuring a valid project doc.
\item Identifies the root organisation directory from \code{projectNotePath}.
\item Creates a new project note directory and an associated R Markdown file.
\item Populates the project note with metadata such as title, author, and prefix.
\item Links the new project note to the corresponding goal, deliverable, or task
in the project document.
\item Inserts a summary of the project note into the project document.
}

The function ensures that all directories and files are properly created and
linked within the project structure.
}
\note{
\itemize{
\item The \code{projectNoteName} should not contain spaces.
\item The function modifies files directly on disk. Ensure backups are created
before running.
\item The function relies on a structured organisation and project directory;
incorrect structures may cause failures.
\item If a project note link already exists in the document, the function will
fail and remove the newly created note.
\item The \code{selection} list must contain \code{goal}, \code{deliverable}, and \code{task} values,
as they determine where the project note link will be inserted.
}
}
\examples{
\dontrun{
# Create a new project note within a project document
create_project_note(
  projectNoteName = "Experiment1",
  projectNotePath = "/path/to/project/notes",
  selection = list(
    rmdType = "DOC",
    filePath = "/path/to/project.Rmd",
    goal = "Define research objective",
    deliverable = "Data collection",
    task = "Set up experiment",
    taskLine = 42
  ),
  authorValue = "sjwest",
  projectNoteTitle = "First Experiment",
  projNoteTemplate = "Project-Note-Template.Rmd",
  projNoteLinkTemplate = "Project-Note-Link-Template.Rmd",
  projNoteLinkSummaryTemplate = "Project-Note-Link-Summary-Template.Rmd",
  todoTemplate = "Todo-Template.Rmd",
  projNoteSummaryTemplate = "Project-Note-Summary-Template.Rmd"
)
}

}
\seealso{
\itemize{
\item \code{\link{find_org_directory}} to locate the organisation directory.
\item \code{\link{get_settings_yml}} for retrieving configuration settings.
\item \code{\link{write_file}} for writing content to files.
\item \code{\link{link_project_note_doc}} for linking project notes to project docs.
}
}
